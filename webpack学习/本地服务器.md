# 本地服务器

## watch

* 开启 watch 模式之后，只要依赖图发生了更新，就会重新进行编译

## webpack-dev-server

* 会使用 node 的 express 插件搭建起一个本地的服务器，用来展示前端的代码
* 使用这个插件编译后的代码，并不会做输出(不会生成 dist 文件夹)，而是把内容放到内存中供 express 读取

### 热更新的原理

* 启热更新，应用程序运行过程中，替换，添加，删除模块，而无需重新刷新整个页面(可以保留应用程序的状态不丢失)，原理是利用了 socket 长连接(适用于即时通信)

```js
module.exports = {
  devServer: {
    contentBase: "./public", // 如果请求的资源没有经过 webpack 的处理，那么直接去 public 文件夹下找对应的文件。Vue public 就是使用这个实现的 ！！！ index.html 并没有在 webpack 的依赖图中(所以在 index.html 中直接引入的资源也不会被 webpack 打包) ！！！ 这个属性只在开发阶段使用，因为在 build 时会通过一个插件将 public 直接复制到的 dist 中
    hot: true, // 开启热更新，应用程序运行过程中，替换，添加，删除模块，而无需重新刷新整个页面(可以保留应用程序的状态不丢失)，原理是利用了 socket 长连接(适用于即时通信)(http是短连接)
    host: "0.0.0.0"， // 主机地址 127.0.1 本机地址
    port: "8080", // 端口号
    open: true, // 是否打开浏览器
    proxy: { // 解决跨域问题
      "/api": {
        target: "http://xxx:xxx", // 代理到真实的服务器
        pathWrite: {
          "^api": "" // 路径重写
        }
      }
    }
  }
}
```
