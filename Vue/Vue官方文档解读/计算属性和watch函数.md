# vue 的计算属性

## computed

- 减少模板中表达式的使用
- 当计算属性在模板中使用，并且计算属性的依赖值(只要是在 computed 中出现过的，哪怕 return 的时候和这个值无关)发生改变的时候就会触发他的更改。如果不发生变化，使用的就是缓存的属性值
- computed 中使用 dirty 来标识是否需要重新计算
- computed 中使用 value 变量缓存上一次计算结果的值，如果连续调用同一个计算属性会返回缓存的值
- 计算属性其实本质就是一个对象，只不过省略使用的话可以写成一个函数。所以使用计算属性的时候不需要加括号。
- 计算属性中的 getter 函数要求是`没有副作用`的

## 计算属性 VS 方法

- 计算属性是基于它们的响应式依赖进行缓存的。只在相关响应式依赖发生改变时它们才会重新求值。多次访问计算属性会立即返回之前的计算结果，而不必再次执行函数。
- 相比之下，每当触发重新渲染时，调用方法将总会再次执行函数。

## vm.$watch() 侦听器

- 适合在调试的时候使用
- watch 是在属性有改变的时候调用对应的方法

```js
// 想要监听一个对象的深层变化时，需要加上 deep 关键字
watch: {
  // 监听的变量只接受以 . 为分隔的路径(obj.person.name)
  combo: {
    handler: function() {
      ......
    },
    // 想要监听对象内部值的变化，需要指定 deep 为 true(值得注意的是，监听数组的变化不需要这样做)
    deep: true
  }
}
```

## 侦听器和计算属性

- 计算属性是依赖的属性发生变化时，计算属性跟着变化，并且主要得到的是一个属性。
- 侦听器不是为了得到一个属性，而是期望在某些属性变化的时候能触发一些函数或者语句。(通常用于在数据变化时进行异步请求等开销较大的步骤)(配合着防抖函数的使用)
