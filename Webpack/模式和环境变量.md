# 模式和环境变量

- 不同的模式，webpack 会有一个内置的优化，那开发者一般都会对不同的模式进行什么不同的适配呢？(sourceMap 代码压缩 ...), 如果开发者指定的和 webpack 内置的优化策略不一致，会怎么样
- 可以通过指定不同的模式，来查看本地开发和生产环境生成的代码有哪些差异(打包时分别指定两种不同的模式，便能看到两种模式下的真实目录有什么差别)

## 模式(webpack 中的概念)

- 供 `mode` 配置选项，告知 `webpack` 使用`相应模式的内置优化`，默认值为 production，另外还有 development、none
- 如果 webpack 配置文件的导出内容为函数的话，函数的参数为默认传进入　`模式`，便可以根据不同的模式来加载不同的 webpack `配置文件`
- 如果 mode 未通过配置或 CLI 赋值，CLI 将使用可能有效的 `NODE_ENV` 值作为 mode

### 模式的区别

1. development 开发模式：打包更加`快速`，省了代码优化步骤
2. production 生产模式: 打包比较慢，会开启 `tree-shaking` 和 `压缩代码`
3. none `不使用`任何默认优化选项

## 环境变量(node 中的概念)

- `process.env.NODE_ENV` 是在 `package.json` 的 `scripts` 命令中注入的, 也就是说 NODE_ENV 并不是 node 自带的，而是由用户显式定义的。
- NODE_ENV 在通过命令行注入之后，便可以在脚本文件中访问到，默认源码是无法访问到 NODE_ENV 的，但是可以使用插件来将 NODE_ENV 的值，注册为全局变量
- 一般情况下，项目会根据`当前的环境变量`来加载`对应的环境变量文件`
