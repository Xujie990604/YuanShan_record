<!--
 * @Author: x09898 coder_xujie@163.com
 * @Date: 2022-09-01 16:38:58
 * @LastEditors: x09898 coder_xujie@163.com
 * @FilePath: \HTML-CSS-Javascript-\Vue框架\Vue Cli教程\Vue项目中的静态资源.md
 * @Description:
-->
# 关于项目中使用各种类型资源时的一个汇总

## mock

在 Vue 中使用 axios 或者 fetch 请求本地JSON数据时，一定要放在public文件夹中(assets中不可以)，并使用绝对路径引入(打包前和打包后的对应关系是Vue实现的。在axios中写相对路径又不会有功能工具去解析，真正代码的执行是在浏览器中执行的，但是由于axios中的路径还是一个基于src的相对路径，当然会找不到)

在 Vue 中使用 require 来请求本地的 JSON 数据时，放在 public 和 assets 下都可以，但是必须使用相对路径的形式来导入 (使用绝对路径的方式来导入会找不到文件)(因为在执行 require 语句时dist文件夹还没生成，当然不能用绝对路径)

## Vue 请求静态资源 (在 img 的 src 和 background 的 url 等场景下 )

* URL中是绝对路径，URL会被直接保存下来(适合请求public文件夹中的内容)(！！！此时的文件路径是基于打包后的文件路径)
* URL中是相对路径。URL中的内容会被作为一个模块进行请求(适合请求assets文件夹中的内容)(!!!此时的文件路径是基于当前的目录结构进行解析(当前的目录结构就是编辑器打开的文件夹))

有一个大胆的猜想。为什么两处的文件路径是基于不同的文件路径，是因为两种情况下，代码执行的时间不同。

1. 当URL是绝对路径时,在 Vue 解析 .vue 文件时根据就不会理会这个路径，直接就原封不动的写到 img 的 src 属性中。不会去判断这个路径下是否有正确的资源(也没有办法判断，因为现在代码还没热更新，dist文件夹还没生成)。只有当这个img被浏览器进行识别的时候，才会去读src中的资源是否正确(此时的文件结构就已经是基于dist文件夹的结构了)

2. URL是相对路径时，在Vue解析 .vue 文件时，就会基于当前的文件系统来读取一下是否有正确的资源。如果有资源的话会自动调用一次 require 来获取到资源(这里的资源理解为活的资源而不是死的字符串)。会推断出这个资源在打包之后的文件路径，然后将这个新的路径放到 img 的 src 中(当浏览器识别这个img时，会读取这个新的路径)

```js
// 这种形式的话，最终浏览器会去 http://localhost:8080/assets/img/home/recommend_bg.jpg 找资源
// 结果理所当然的是失败，因为打包过后 assets 文件夹早就不在了
// 个人猜测为什么会出现这种问题，是因为写成这种方式即需要解析变量，又需要解析路径。需要两步
// img 的 src 是一个变量
<img :src="imageUrl" />
// 使用变量来接受一个相对路径的字符串
imageUrl: '../assets/img/home/recommend_bg.jpg'
```

```js
// 这种形式的话，最终浏览器会去 http://localhost:8080/img/aaa.jpg 找资源
// 结果是成功，因为 public 中的东西在打包后也会原封不动
// img 的 src 是一个变量
<img :src="imageUrl" />
// 使用变量来接受一个绝对路径的字符串
imageUrl: 'img/aaa.jpg'

// 这种做法的好处是什么，可以直接通过改变 imageUrl 变量的方式，来实现图片的切换
```
