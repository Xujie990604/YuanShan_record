# 客户端检测

* 检测Web客户端的手段有很多，但是不到万不得已不要使用客户端检测，尽量使用通用的方法来实现功能。
* 先设计最通用的方案，然后在使用特点与浏览器的技术来增强该方案。

## 能力检测

* 能力检测不是识别特定的浏览器，而是识别浏览器的能力。
* 有两个要点

1. 先要检测达成目的最常用的那个属性，为了效率
2. 要测试的是要用到的特性，不要所测非所用。

* 更可靠的能力检测需要使用typeof操作符，比如if(obj.test)本意是想测试有没有test函数，但是obj要是有test属性的话也会通过检测。所以使用if(typeof(obj.test) == "function")

## 怪癖检测

* 是为了识别浏览器的特殊行为，bug。
* 早发现早应对

## 用户代理检测

* 在每一次的http请求过程中，用户代理字符串是作为响应首部发送的。可以通过navigator.userAgent来访问
* 在服务端，检测用户代理字符串是常用的，但是在客户端，优先级排在了能力监测和怪癖检测之后

### 电子欺骗

* 浏览器在用户代理字符中添加错误的引导信息来欺骗服务器的行为
* 由于当时的大多数浏览器嗅探程序只检测用户代理字符串中的产品名称部分，结果IE就成功地将自己标识为Mozilla，从而伪装成Netscape Navigator。(绝大多数的浏览器为了被服务器广泛的接收，都把自己标识为Mozilla)
* 电子欺骗导致的

### 早期浏览器

* 由于当时的大多数浏览器嗅探程序只检测用户代理字符串中的产品名称部分，结果IE就成功地将自己标识为Mozilla，从而伪装成Netscape Navigator。
* IE中所有这些变化都是为了确保过去的用户代理检测脚本能够继续发挥作用，同时还能给新脚本提供更丰富的信息。

### 检测引擎的方式

* 高程 p221