# 预编译

当JS执行到一段可执行代码时(全局代码，函数代码)就会创建执行上下文，执行上下文中有三个重要的属性

1. 变量对象(上下文中定义的变量声明与函数声明): 分为全局变量对象和函数变量对象
2. this
3. 作用域链

## js执行三部曲

1. 语法分析，通篇扫描
2. 预编译 //1.函数声明 整体提升     2.变量声明 提升
3. 解释执行

## 暗示全局变量

* imply global 暗示全局变量 如果有变量未经声明就赋值，此变量就为全局对象（window）所有
* 一切声明的的全局变量，全是window的属性 （window就是全局的域）

## 预编译：四部曲（预编译发生在函数执行前一刻）

### 函数内实现预编译

1. 创建AO（执行期上下文）对象
2. 找形参和变量声明，将变量和形参作为AO属性名，值为undefined。（变量 只有声明提升）
3. 将形参和实参值统一
4. 在函数体里面找函数声明(函数声明和函数表达式是完全不同的)，将函数名作为AO属性名，值为函数体。（函数声明整体提升）
！！预编译看过了变量声明，和函数声明所以在函数执行期间就不会再看了。因为已经看过一遍了，执行赋值的过程。

### 全局内实现预编译

1. 创建GO对象
Go {

}GO === window
2. 找变量声明，将变量作为AO属性名，值为undefined。（变量 只有声明提升）
3. 在函数体里面找函数声明，将函数名作为AO属性名，值为函数体。（函数声明整体提升）

## ！！！！！！！！注意的知识点

1. 全局变量和局部变量的作用域(如果函数内找不到需要的局部变量就要去全局变量里去找)(执行函数的时候优先使用函数内部的变量)
2. argument和形参相映射
3. 如果有变量未经声明就赋值，此变量就为全局对象（window）所有
4. 不管语句能不能执行（比如if语句中有变量声明，也要写出来）都要按照流程提升。不过是否执行需要具体判断
5. if 里面定义一个function()(在谷歌浏览器中执行不会报错，但是预编译找不到这个函数声明)
6. 没有var的变量不会变量提升，且被放置在全局作用域
