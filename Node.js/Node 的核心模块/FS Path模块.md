# FS 文件系统模块

## 一、FS 文件系统

- fs 模块能够以标准的 `POSIX` 函数为模型的方式与文件系统进行交互
- 所有的文件系统操作都具有 `同步`，`回调` 和 `基于Promise` 这三种形式
- `同步的API` 会阻塞时间循环和下一步的JS执行，直到操作被完成
- `基于 Promise 的API` 操作会返回一个 Promise
- `回调形式的API` 在操作完成之后调用回调函数，但是回调函数的`第一个参数始终用于存留异常(node 特色)`，无异常的话为 null || undefined。在性能方面 回调函数的版本比 Promise 版本更好

## 二、Path 路径模块

- 用来处理文件和目录的路径，默认操作因 node 应用的操作系统而异(当处于 window 操作系统，将假定正在使用 window 风格的路径)

### 2.1 路径处理对比

- `path.join([...paths])` 可以接受多个路径，将多个路径拼接成一个规范化的路径, 路径前的 `/` 只会当做路径分隔符，不会被当做根目录符号来处理(和 resolve 的主要区别)。
- `path.resolve([...paths])` 将路径或路径片段的序列解析为绝对路径。路径前的 `/` 会被认为是根目录符号，最终返回的形式是一个`绝对路径`，如果路径解析后不是绝对路径，则使用`当前工作目录`当做路径前缀。
- '../' 作为参数会抵消一层路径

## 三、 路径问题

- fs 模块操作文件时，若代码是相对路径。在代码运行时，会以 node 命令所处的目录为基准进行拼接。(在不同的目录启动文件会有不同的基础路径，导致失败)
- 使用绝对路径的话，就不会出现路径拼接失败的问题。(绝对路径中一个 / 不行，要加上转义字符 // 代表路径中的分隔符)
- `__dirname` 代表当前文件所处`目录`的绝对路径, `__filename` 代表当前文件所处的绝对路径(包含当前文件)，这两个不受执行 node 命令所属路径的影响