<!--
 * @Author: x09898 coder_xujie@163.com
 * @Date: 2023-01-16 16:02:04
 * @LastEditors: xujie 1607526161@qq.com
 * @FilePath: \HTML-CSS-Javascript-\计算机网络\计算机网络\webSocket.md
 * @Description: 
-->
# WebSocket

* WebSocket 协议运行在 TCP 协议之上，与 HTTP 协议同属于应用层网络数据传输协议。WebSocket 相比于 HTTP 协议最大的特点是: 允许服务端主动向客户端推送数据(从而解决 HTTP 协议实现中客户端只能通过轮询方式获取服务端推送数据造成的资源消耗和消息延时等问题)
* WebSocket 是全双工的协议

## 轮询

* 短轮询：一般是由客户端每隔一段时间（如每隔5s）向服务器发起一次普通 HTTP 请求。服务端查询当前接口是否有数据更新，若有数据更新则向客户端返回最新数据，若无则提示客户端无数据更新。
* 长轮询：一般是由客户端向服务端发出一个设置较长网络超时时间的 HTTP 请求，并在 HTTP 连接超时前，不主动断开连接；待客户端超时或有数据返回后，再次建立一个同样的 HTTP 请求，重复以上过程

## 协议握手

WebSocket 协议握手复用了 HTTP 协议：

1. 客户端通过 HTTP 请求与 WebSocket 服务端协商升级协议到 Websocket 协议。
2. 服务端通过 HTTP 响应数据回应客户端的升级请求，完成协议握手。

完成协议握手后，后续的数据交换则遵照 WebSocket 的协议进行。

## 关闭连接

* 由于 WebSocket 是全双工的协议，因此客户端和服务端都可以选择关闭 WebSocket 连接

## 适用场景

* WebSockets 适用于多个客户端和一个服务器端实现实时通信的场合

1. 多人在线游戏网站
2. 在线聊天室
3. 实时体育或者新闻评论网站
4. 实时交互用户信息的社交网站
